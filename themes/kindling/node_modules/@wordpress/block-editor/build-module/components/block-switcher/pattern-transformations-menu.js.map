{"version":3,"names":["__","useState","useInstanceId","useViewportMatch","chevronRight","MenuGroup","MenuItem","Popover","VisuallyHidden","privateApis","componentsPrivateApis","BlockPreview","useTransformedPatterns","unlock","jsx","_jsx","jsxs","_jsxs","CompositeV2","Composite","CompositeItemV2","CompositeItem","useCompositeStoreV2","useCompositeStore","PatternTransformationsMenu","blocks","patterns","statePatterns","onSelect","showTransforms","setShowTransforms","length","className","children","PreviewPatternsPopover","onClick","event","preventDefault","icon","isMobile","placement","offset","BlockPatternsList","composite","store","role","map","pattern","BlockPattern","name","baseClassName","descriptionId","render","title","description","undefined","transformedBlocks","viewportWidth","id"],"sources":["@wordpress/block-editor/src/components/block-switcher/pattern-transformations-menu.js"],"sourcesContent":["/**\n * WordPress dependencies\n */\nimport { __ } from '@wordpress/i18n';\nimport { useState } from '@wordpress/element';\nimport { useInstanceId, useViewportMatch } from '@wordpress/compose';\nimport { chevronRight } from '@wordpress/icons';\n\nimport {\n\tMenuGroup,\n\tMenuItem,\n\tPopover,\n\tVisuallyHidden,\n\tprivateApis as componentsPrivateApis,\n} from '@wordpress/components';\n\n/**\n * Internal dependencies\n */\nimport BlockPreview from '../block-preview';\nimport useTransformedPatterns from './use-transformed-patterns';\nimport { unlock } from '../../lock-unlock';\n\nconst {\n\tCompositeV2: Composite,\n\tCompositeItemV2: CompositeItem,\n\tuseCompositeStoreV2: useCompositeStore,\n} = unlock( componentsPrivateApis );\n\nfunction PatternTransformationsMenu( {\n\tblocks,\n\tpatterns: statePatterns,\n\tonSelect,\n} ) {\n\tconst [ showTransforms, setShowTransforms ] = useState( false );\n\tconst patterns = useTransformedPatterns( statePatterns, blocks );\n\n\tif ( ! patterns.length ) {\n\t\treturn null;\n\t}\n\n\treturn (\n\t\t<MenuGroup className=\"block-editor-block-switcher__pattern__transforms__menugroup\">\n\t\t\t{ showTransforms && (\n\t\t\t\t<PreviewPatternsPopover\n\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t/>\n\t\t\t) }\n\t\t\t<MenuItem\n\t\t\t\tonClick={ ( event ) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tsetShowTransforms( ! showTransforms );\n\t\t\t\t} }\n\t\t\t\ticon={ chevronRight }\n\t\t\t>\n\t\t\t\t{ __( 'Patterns' ) }\n\t\t\t</MenuItem>\n\t\t</MenuGroup>\n\t);\n}\n\nfunction PreviewPatternsPopover( { patterns, onSelect } ) {\n\tconst isMobile = useViewportMatch( 'medium', '<' );\n\n\treturn (\n\t\t<div className=\"block-editor-block-switcher__popover-preview-container\">\n\t\t\t<Popover\n\t\t\t\tclassName=\"block-editor-block-switcher__popover-preview\"\n\t\t\t\tplacement={ isMobile ? 'bottom' : 'right-start' }\n\t\t\t\toffset={ 16 }\n\t\t\t>\n\t\t\t\t<div className=\"block-editor-block-switcher__preview is-pattern-list-preview\">\n\t\t\t\t\t<BlockPatternsList\n\t\t\t\t\t\tpatterns={ patterns }\n\t\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</Popover>\n\t\t</div>\n\t);\n}\n\nfunction BlockPatternsList( { patterns, onSelect } ) {\n\tconst composite = useCompositeStore();\n\treturn (\n\t\t<Composite\n\t\t\tstore={ composite }\n\t\t\trole=\"listbox\"\n\t\t\tclassName=\"block-editor-block-switcher__preview-patterns-container\"\n\t\t\taria-label={ __( 'Patterns list' ) }\n\t\t>\n\t\t\t{ patterns.map( ( pattern ) => (\n\t\t\t\t<BlockPattern\n\t\t\t\t\tkey={ pattern.name }\n\t\t\t\t\tpattern={ pattern }\n\t\t\t\t\tonSelect={ onSelect }\n\t\t\t\t/>\n\t\t\t) ) }\n\t\t</Composite>\n\t);\n}\n\nfunction BlockPattern( { pattern, onSelect } ) {\n\t// TODO check pattern/preview width...\n\tconst baseClassName =\n\t\t'block-editor-block-switcher__preview-patterns-container';\n\tconst descriptionId = useInstanceId(\n\t\tBlockPattern,\n\t\t`${ baseClassName }-list__item-description`\n\t);\n\treturn (\n\t\t<div className={ `${ baseClassName }-list__list-item` }>\n\t\t\t<CompositeItem\n\t\t\t\trender={\n\t\t\t\t\t<div\n\t\t\t\t\t\trole=\"option\"\n\t\t\t\t\t\taria-label={ pattern.title }\n\t\t\t\t\t\taria-describedby={\n\t\t\t\t\t\t\tpattern.description ? descriptionId : undefined\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName={ `${ baseClassName }-list__item` }\n\t\t\t\t\t/>\n\t\t\t\t}\n\t\t\t\tonClick={ () => onSelect( pattern.transformedBlocks ) }\n\t\t\t>\n\t\t\t\t<BlockPreview\n\t\t\t\t\tblocks={ pattern.transformedBlocks }\n\t\t\t\t\tviewportWidth={ pattern.viewportWidth || 500 }\n\t\t\t\t/>\n\t\t\t\t<div className={ `${ baseClassName }-list__item-title` }>\n\t\t\t\t\t{ pattern.title }\n\t\t\t\t</div>\n\t\t\t</CompositeItem>\n\t\t\t{ !! pattern.description && (\n\t\t\t\t<VisuallyHidden id={ descriptionId }>\n\t\t\t\t\t{ pattern.description }\n\t\t\t\t</VisuallyHidden>\n\t\t\t) }\n\t\t</div>\n\t);\n}\n\nexport default PatternTransformationsMenu;\n"],"mappings":"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","ignoreList":[]}