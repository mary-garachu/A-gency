{"version":3,"names":["_colord","require","_names","_interopRequireDefault","_a11y","_element","_i18n","_dom","_richText","_deprecated","_constants","_registration","extend","namesPlugin","a11yPlugin","ICON_COLORS","isUnmodifiedAttribute","attributeDefinition","value","hasOwnProperty","default","type","length","undefined","isUnmodifiedBlock","block","_getBlockType$attribu","Object","entries","getBlockType","name","attributes","every","key","definition","isUnmodifiedDefaultBlock","getDefaultBlockName","isUnmodifiedBlockContent","contentAttributes","getBlockAttributesNamesByRole","isValidIcon","icon","isValidElement","Component","normalizeIconObject","BLOCK_ICON_DEFAULT","src","colordBgColor","colord","background","getColorContrast","iconColor","contrast","maxContrast","Math","max","map","foreground","find","shadowColor","alpha","toRgbString","normalizeBlockType","blockTypeOrName","getBlockLabel","blockType","context","__experimentalLabel","getLabel","title","label","toPlainText","stripHTML","getAccessibleBlockLabel","position","direction","hasPosition","hasLabel","sprintf","__","getDefault","attributeSchema","RichTextData","__experimentalSanitizeBlockAttributes","Error","reduce","accumulator","schema","fromHTMLString","toHTMLString","_default","indexOf","source","Array","isArray","role","attributesNames","keys","filter","attributeName","attribute","__experimentalRole","deprecated","since","version","alternative","hint","__experimentalGetBlockAttributesNamesByRole","args","exports","omit","object","fromEntries","includes"],"sources":["@wordpress/blocks/src/api/utils.js"],"sourcesContent":["/**\n * External dependencies\n */\nimport { colord, extend } from 'colord';\nimport namesPlugin from 'colord/plugins/names';\nimport a11yPlugin from 'colord/plugins/a11y';\n\n/**\n * WordPress dependencies\n */\nimport { Component, isValidElement } from '@wordpress/element';\nimport { __, sprintf } from '@wordpress/i18n';\nimport { __unstableStripHTML as stripHTML } from '@wordpress/dom';\nimport { RichTextData } from '@wordpress/rich-text';\nimport deprecated from '@wordpress/deprecated';\n\n/**\n * Internal dependencies\n */\nimport { BLOCK_ICON_DEFAULT } from './constants';\nimport { getBlockType, getDefaultBlockName } from './registration';\n\nextend( [ namesPlugin, a11yPlugin ] );\n\n/**\n * Array of icon colors containing a color to be used if the icon color\n * was not explicitly set but the icon background color was.\n *\n * @type {Object}\n */\nconst ICON_COLORS = [ '#191e23', '#f8f9f9' ];\n\n/**\n * Determines whether the block's attribute is equal to the default attribute\n * which means the attribute is unmodified.\n * @param {Object} attributeDefinition The attribute's definition of the block type.\n * @param {*}      value               The attribute's value.\n * @return {boolean} Whether the attribute is unmodified.\n */\nfunction isUnmodifiedAttribute( attributeDefinition, value ) {\n\t// Every attribute that has a default must match the default.\n\tif ( attributeDefinition.hasOwnProperty( 'default' ) ) {\n\t\treturn value === attributeDefinition.default;\n\t}\n\n\t// The rich text type is a bit different from the rest because it\n\t// has an implicit default value of an empty RichTextData instance,\n\t// so check the length of the value.\n\tif ( attributeDefinition.type === 'rich-text' ) {\n\t\treturn ! value?.length;\n\t}\n\n\t// Every attribute that doesn't have a default should be undefined.\n\treturn value === undefined;\n}\n\n/**\n * Determines whether the block's attributes are equal to the default attributes\n * which means the block is unmodified.\n *\n * @param {WPBlock} block Block Object\n *\n * @return {boolean} Whether the block is an unmodified block.\n */\nexport function isUnmodifiedBlock( block ) {\n\treturn Object.entries( getBlockType( block.name )?.attributes ?? {} ).every(\n\t\t( [ key, definition ] ) => {\n\t\t\tconst value = block.attributes[ key ];\n\n\t\t\treturn isUnmodifiedAttribute( definition, value );\n\t\t}\n\t);\n}\n\n/**\n * Determines whether the block is a default block and its attributes are equal\n * to the default attributes which means the block is unmodified.\n *\n * @param {WPBlock} block Block Object\n *\n * @return {boolean} Whether the block is an unmodified default block.\n */\nexport function isUnmodifiedDefaultBlock( block ) {\n\treturn block.name === getDefaultBlockName() && isUnmodifiedBlock( block );\n}\n\n/**\n * Determines whether the block content is unmodified. A block content is\n * considered unmodified if all the attributes that have a role of 'content'\n * are equal to the default attributes (or undefined).\n * If the block does not have any attributes with a role of 'content', it\n * will be considered unmodified if all the attributes are equal to the default\n * attributes (or undefined).\n *\n * @param {WPBlock} block Block Object\n * @return {boolean} Whether the block content is unmodified.\n */\nexport function isUnmodifiedBlockContent( block ) {\n\tconst contentAttributes = getBlockAttributesNamesByRole(\n\t\tblock.name,\n\t\t'content'\n\t);\n\n\tif ( contentAttributes.length === 0 ) {\n\t\treturn isUnmodifiedBlock( block );\n\t}\n\n\treturn contentAttributes.every( ( key ) => {\n\t\tconst definition = getBlockType( block.name )?.attributes[ key ];\n\t\tconst value = block.attributes[ key ];\n\n\t\treturn isUnmodifiedAttribute( definition, value );\n\t} );\n}\n\n/**\n * Function that checks if the parameter is a valid icon.\n *\n * @param {*} icon Parameter to be checked.\n *\n * @return {boolean} True if the parameter is a valid icon and false otherwise.\n */\n\nexport function isValidIcon( icon ) {\n\treturn (\n\t\t!! icon &&\n\t\t( typeof icon === 'string' ||\n\t\t\tisValidElement( icon ) ||\n\t\t\ttypeof icon === 'function' ||\n\t\t\ticon instanceof Component )\n\t);\n}\n\n/**\n * Function that receives an icon as set by the blocks during the registration\n * and returns a new icon object that is normalized so we can rely on just on possible icon structure\n * in the codebase.\n *\n * @param {WPBlockTypeIconRender} icon Render behavior of a block type icon;\n *                                     one of a Dashicon slug, an element, or a\n *                                     component.\n *\n * @return {WPBlockTypeIconDescriptor} Object describing the icon.\n */\nexport function normalizeIconObject( icon ) {\n\ticon = icon || BLOCK_ICON_DEFAULT;\n\tif ( isValidIcon( icon ) ) {\n\t\treturn { src: icon };\n\t}\n\n\tif ( 'background' in icon ) {\n\t\tconst colordBgColor = colord( icon.background );\n\t\tconst getColorContrast = ( iconColor ) =>\n\t\t\tcolordBgColor.contrast( iconColor );\n\t\tconst maxContrast = Math.max( ...ICON_COLORS.map( getColorContrast ) );\n\n\t\treturn {\n\t\t\t...icon,\n\t\t\tforeground: icon.foreground\n\t\t\t\t? icon.foreground\n\t\t\t\t: ICON_COLORS.find(\n\t\t\t\t\t\t( iconColor ) =>\n\t\t\t\t\t\t\tgetColorContrast( iconColor ) === maxContrast\n\t\t\t\t  ),\n\t\t\tshadowColor: colordBgColor.alpha( 0.3 ).toRgbString(),\n\t\t};\n\t}\n\n\treturn icon;\n}\n\n/**\n * Normalizes block type passed as param. When string is passed then\n * it converts it to the matching block type object.\n * It passes the original object otherwise.\n *\n * @param {string|Object} blockTypeOrName Block type or name.\n *\n * @return {?Object} Block type.\n */\nexport function normalizeBlockType( blockTypeOrName ) {\n\tif ( typeof blockTypeOrName === 'string' ) {\n\t\treturn getBlockType( blockTypeOrName );\n\t}\n\n\treturn blockTypeOrName;\n}\n\n/**\n * Get the label for the block, usually this is either the block title,\n * or the value of the block's `label` function when that's specified.\n *\n * @param {Object} blockType  The block type.\n * @param {Object} attributes The values of the block's attributes.\n * @param {Object} context    The intended use for the label.\n *\n * @return {string} The block label.\n */\nexport function getBlockLabel( blockType, attributes, context = 'visual' ) {\n\tconst { __experimentalLabel: getLabel, title } = blockType;\n\n\tconst label = getLabel && getLabel( attributes, { context } );\n\n\tif ( ! label ) {\n\t\treturn title;\n\t}\n\n\tif ( label.toPlainText ) {\n\t\treturn label.toPlainText();\n\t}\n\n\t// Strip any HTML (i.e. RichText formatting) before returning.\n\treturn stripHTML( label );\n}\n\n/**\n * Get a label for the block for use by screenreaders, this is more descriptive\n * than the visual label and includes the block title and the value of the\n * `getLabel` function if it's specified.\n *\n * @param {?Object} blockType              The block type.\n * @param {Object}  attributes             The values of the block's attributes.\n * @param {?number} position               The position of the block in the block list.\n * @param {string}  [direction='vertical'] The direction of the block layout.\n *\n * @return {string} The block label.\n */\nexport function getAccessibleBlockLabel(\n\tblockType,\n\tattributes,\n\tposition,\n\tdirection = 'vertical'\n) {\n\t// `title` is already localized, `label` is a user-supplied value.\n\tconst title = blockType?.title;\n\tconst label = blockType\n\t\t? getBlockLabel( blockType, attributes, 'accessibility' )\n\t\t: '';\n\tconst hasPosition = position !== undefined;\n\n\t// getBlockLabel returns the block title as a fallback when there's no label,\n\t// if it did return the title, this function needs to avoid adding the\n\t// title twice within the accessible label. Use this `hasLabel` boolean to\n\t// handle that.\n\tconst hasLabel = label && label !== title;\n\n\tif ( hasPosition && direction === 'vertical' ) {\n\t\tif ( hasLabel ) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: accessibility text. 1: The block title. 2: The block row number. 3: The block label.. */\n\t\t\t\t__( '%1$s Block. Row %2$d. %3$s' ),\n\t\t\t\ttitle,\n\t\t\t\tposition,\n\t\t\t\tlabel\n\t\t\t);\n\t\t}\n\n\t\treturn sprintf(\n\t\t\t/* translators: accessibility text. 1: The block title. 2: The block row number. */\n\t\t\t__( '%1$s Block. Row %2$d' ),\n\t\t\ttitle,\n\t\t\tposition\n\t\t);\n\t} else if ( hasPosition && direction === 'horizontal' ) {\n\t\tif ( hasLabel ) {\n\t\t\treturn sprintf(\n\t\t\t\t/* translators: accessibility text. 1: The block title. 2: The block column number. 3: The block label.. */\n\t\t\t\t__( '%1$s Block. Column %2$d. %3$s' ),\n\t\t\t\ttitle,\n\t\t\t\tposition,\n\t\t\t\tlabel\n\t\t\t);\n\t\t}\n\n\t\treturn sprintf(\n\t\t\t/* translators: accessibility text. 1: The block title. 2: The block column number. */\n\t\t\t__( '%1$s Block. Column %2$d' ),\n\t\t\ttitle,\n\t\t\tposition\n\t\t);\n\t}\n\n\tif ( hasLabel ) {\n\t\treturn sprintf(\n\t\t\t/* translators: accessibility text. %1: The block title. %2: The block label. */\n\t\t\t__( '%1$s Block. %2$s' ),\n\t\t\ttitle,\n\t\t\tlabel\n\t\t);\n\t}\n\n\treturn sprintf(\n\t\t/* translators: accessibility text. %s: The block title. */\n\t\t__( '%s Block' ),\n\t\ttitle\n\t);\n}\n\nexport function getDefault( attributeSchema ) {\n\tif ( attributeSchema.default !== undefined ) {\n\t\treturn attributeSchema.default;\n\t}\n\n\tif ( attributeSchema.type === 'rich-text' ) {\n\t\treturn new RichTextData();\n\t}\n}\n\n/**\n * Ensure attributes contains only values defined by block type, and merge\n * default values for missing attributes.\n *\n * @param {string} name       The block's name.\n * @param {Object} attributes The block's attributes.\n * @return {Object} The sanitized attributes.\n */\nexport function __experimentalSanitizeBlockAttributes( name, attributes ) {\n\t// Get the type definition associated with a registered block.\n\tconst blockType = getBlockType( name );\n\n\tif ( undefined === blockType ) {\n\t\tthrow new Error( `Block type '${ name }' is not registered.` );\n\t}\n\n\treturn Object.entries( blockType.attributes ).reduce(\n\t\t( accumulator, [ key, schema ] ) => {\n\t\t\tconst value = attributes[ key ];\n\n\t\t\tif ( undefined !== value ) {\n\t\t\t\tif ( schema.type === 'rich-text' ) {\n\t\t\t\t\tif ( value instanceof RichTextData ) {\n\t\t\t\t\t\taccumulator[ key ] = value;\n\t\t\t\t\t} else if ( typeof value === 'string' ) {\n\t\t\t\t\t\taccumulator[ key ] =\n\t\t\t\t\t\t\tRichTextData.fromHTMLString( value );\n\t\t\t\t\t}\n\t\t\t\t} else if (\n\t\t\t\t\tschema.type === 'string' &&\n\t\t\t\t\tvalue instanceof RichTextData\n\t\t\t\t) {\n\t\t\t\t\taccumulator[ key ] = value.toHTMLString();\n\t\t\t\t} else {\n\t\t\t\t\taccumulator[ key ] = value;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst _default = getDefault( schema );\n\t\t\t\tif ( undefined !== _default ) {\n\t\t\t\t\taccumulator[ key ] = _default;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( [ 'node', 'children' ].indexOf( schema.source ) !== -1 ) {\n\t\t\t\t// Ensure value passed is always an array, which we're expecting in\n\t\t\t\t// the RichText component to handle the deprecated value.\n\t\t\t\tif ( typeof accumulator[ key ] === 'string' ) {\n\t\t\t\t\taccumulator[ key ] = [ accumulator[ key ] ];\n\t\t\t\t} else if ( ! Array.isArray( accumulator[ key ] ) ) {\n\t\t\t\t\taccumulator[ key ] = [];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn accumulator;\n\t\t},\n\t\t{}\n\t);\n}\n\n/**\n * Filter block attributes by `role` and return their names.\n *\n * @param {string} name Block attribute's name.\n * @param {string} role The role of a block attribute.\n *\n * @return {string[]} The attribute names that have the provided role.\n */\nexport function getBlockAttributesNamesByRole( name, role ) {\n\tconst attributes = getBlockType( name )?.attributes;\n\tif ( ! attributes ) {\n\t\treturn [];\n\t}\n\tconst attributesNames = Object.keys( attributes );\n\tif ( ! role ) {\n\t\treturn attributesNames;\n\t}\n\n\treturn attributesNames.filter( ( attributeName ) => {\n\t\tconst attribute = attributes[ attributeName ];\n\t\tif ( attribute?.role === role ) {\n\t\t\treturn true;\n\t\t}\n\t\tif ( attribute?.__experimentalRole === role ) {\n\t\t\tdeprecated( '__experimentalRole attribute', {\n\t\t\t\tsince: '6.7',\n\t\t\t\tversion: '6.8',\n\t\t\t\talternative: 'role attribute',\n\t\t\t\thint: `Check the block.json of the ${ name } block.`,\n\t\t\t} );\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t} );\n}\n\nexport const __experimentalGetBlockAttributesNamesByRole = ( ...args ) => {\n\tdeprecated( '__experimentalGetBlockAttributesNamesByRole', {\n\t\tsince: '6.7',\n\t\tversion: '6.8',\n\t\talternative: 'getBlockAttributesNamesByRole',\n\t} );\n\treturn getBlockAttributesNamesByRole( ...args );\n};\n\n/**\n * Return a new object with the specified keys omitted.\n *\n * @param {Object} object Original object.\n * @param {Array}  keys   Keys to be omitted.\n *\n * @return {Object} Object with omitted keys.\n */\nexport function omit( object, keys ) {\n\treturn Object.fromEntries(\n\t\tObject.entries( object ).filter( ( [ key ] ) => ! keys.includes( key ) )\n\t);\n}\n"],"mappings":"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","ignoreList":[]}