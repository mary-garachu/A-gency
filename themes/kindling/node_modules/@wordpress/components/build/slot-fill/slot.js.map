{"version":3,"names":["_element","require","_context","_interopRequireDefault","_jsxRuntime","isFunction","maybeFunc","Slot","props","_registry$getFills","registry","useContext","SlotFillContext","rerender","useReducer","ref","useRef","name","children","fillProps","useEffect","refValue","current","registerSlot","unregisterSlot","fills","getFills","map","fill","fillChildren","Children","child","childIndex","childKey","key","cloneElement","filter","element","isEmptyElement","jsx","Fragment","_default","exports","default"],"sources":["@wordpress/components/src/slot-fill/slot.tsx"],"sourcesContent":["/**\n * External dependencies\n */\nimport type { ReactElement, ReactNode, Key } from 'react';\n\n/**\n * WordPress dependencies\n */\nimport {\n\tuseContext,\n\tuseEffect,\n\tuseReducer,\n\tuseRef,\n\tChildren,\n\tcloneElement,\n\tisEmptyElement,\n} from '@wordpress/element';\n\n/**\n * Internal dependencies\n */\nimport SlotFillContext from './context';\nimport type { SlotComponentProps } from './types';\n\n/**\n * Whether the argument is a function.\n *\n * @param maybeFunc The argument to check.\n * @return True if the argument is a function, false otherwise.\n */\nfunction isFunction( maybeFunc: any ): maybeFunc is Function {\n\treturn typeof maybeFunc === 'function';\n}\n\nfunction Slot( props: Omit< SlotComponentProps, 'bubblesVirtually' > ) {\n\tconst registry = useContext( SlotFillContext );\n\tconst [ , rerender ] = useReducer( () => [], [] );\n\tconst ref = useRef( { rerender } );\n\n\tconst { name, children, fillProps = {} } = props;\n\n\tuseEffect( () => {\n\t\tconst refValue = ref.current;\n\t\tregistry.registerSlot( name, refValue );\n\t\treturn () => registry.unregisterSlot( name, refValue );\n\t}, [ registry, name ] );\n\n\tconst fills: ReactNode[] = ( registry.getFills( name, ref.current ) ?? [] )\n\t\t.map( ( fill ) => {\n\t\t\tconst fillChildren = isFunction( fill.children )\n\t\t\t\t? fill.children( fillProps )\n\t\t\t\t: fill.children;\n\t\t\treturn Children.map( fillChildren, ( child, childIndex ) => {\n\t\t\t\tif ( ! child || typeof child === 'string' ) {\n\t\t\t\t\treturn child;\n\t\t\t\t}\n\t\t\t\tlet childKey: Key = childIndex;\n\t\t\t\tif (\n\t\t\t\t\ttypeof child === 'object' &&\n\t\t\t\t\t'key' in child &&\n\t\t\t\t\tchild?.key\n\t\t\t\t) {\n\t\t\t\t\tchildKey = child.key;\n\t\t\t\t}\n\n\t\t\t\treturn cloneElement( child as ReactElement, {\n\t\t\t\t\tkey: childKey,\n\t\t\t\t} );\n\t\t\t} );\n\t\t} )\n\t\t.filter(\n\t\t\t// In some cases fills are rendered only when some conditions apply.\n\t\t\t// This ensures that we only use non-empty fills when rendering, i.e.,\n\t\t\t// it allows us to render wrappers only when the fills are actually present.\n\t\t\t( element ) => ! isEmptyElement( element )\n\t\t);\n\n\treturn <>{ isFunction( children ) ? children( fills ) : fills }</>;\n}\n\nexport default Slot;\n"],"mappings":";;;;;;;AAQA,IAAAA,QAAA,GAAAC,OAAA;AAaA,IAAAC,QAAA,GAAAC,sBAAA,CAAAF,OAAA;AAAwC,IAAAG,WAAA,GAAAH,OAAA;AArBxC;AACA;AACA;;AAGA;AACA;AACA;;AAWA;AACA;AACA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA,SAASI,UAAUA,CAAEC,SAAc,EAA0B;EAC5D,OAAO,OAAOA,SAAS,KAAK,UAAU;AACvC;AAEA,SAASC,IAAIA,CAAEC,KAAqD,EAAG;EAAA,IAAAC,kBAAA;EACtE,MAAMC,QAAQ,GAAG,IAAAC,mBAAU,EAAEC,gBAAgB,CAAC;EAC9C,MAAM,GAAIC,QAAQ,CAAE,GAAG,IAAAC,mBAAU,EAAE,MAAM,EAAE,EAAE,EAAG,CAAC;EACjD,MAAMC,GAAG,GAAG,IAAAC,eAAM,EAAE;IAAEH;EAAS,CAAE,CAAC;EAElC,MAAM;IAAEI,IAAI;IAAEC,QAAQ;IAAEC,SAAS,GAAG,CAAC;EAAE,CAAC,GAAGX,KAAK;EAEhD,IAAAY,kBAAS,EAAE,MAAM;IAChB,MAAMC,QAAQ,GAAGN,GAAG,CAACO,OAAO;IAC5BZ,QAAQ,CAACa,YAAY,CAAEN,IAAI,EAAEI,QAAS,CAAC;IACvC,OAAO,MAAMX,QAAQ,CAACc,cAAc,CAAEP,IAAI,EAAEI,QAAS,CAAC;EACvD,CAAC,EAAE,CAAEX,QAAQ,EAAEO,IAAI,CAAG,CAAC;EAEvB,MAAMQ,KAAkB,GAAG,EAAAhB,kBAAA,GAAEC,QAAQ,CAACgB,QAAQ,CAAET,IAAI,EAAEF,GAAG,CAACO,OAAQ,CAAC,cAAAb,kBAAA,cAAAA,kBAAA,GAAI,EAAE,EACvEkB,GAAG,CAAIC,IAAI,IAAM;IACjB,MAAMC,YAAY,GAAGxB,UAAU,CAAEuB,IAAI,CAACV,QAAS,CAAC,GAC7CU,IAAI,CAACV,QAAQ,CAAEC,SAAU,CAAC,GAC1BS,IAAI,CAACV,QAAQ;IAChB,OAAOY,iBAAQ,CAACH,GAAG,CAAEE,YAAY,EAAE,CAAEE,KAAK,EAAEC,UAAU,KAAM;MAC3D,IAAK,CAAED,KAAK,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAG;QAC3C,OAAOA,KAAK;MACb;MACA,IAAIE,QAAa,GAAGD,UAAU;MAC9B,IACC,OAAOD,KAAK,KAAK,QAAQ,IACzB,KAAK,IAAIA,KAAK,IACdA,KAAK,EAAEG,GAAG,EACT;QACDD,QAAQ,GAAGF,KAAK,CAACG,GAAG;MACrB;MAEA,OAAO,IAAAC,qBAAY,EAAEJ,KAAK,EAAkB;QAC3CG,GAAG,EAAED;MACN,CAAE,CAAC;IACJ,CAAE,CAAC;EACJ,CAAE,CAAC,CACFG,MAAM;EACN;EACA;EACA;EACEC,OAAO,IAAM,CAAE,IAAAC,uBAAc,EAAED,OAAQ,CAC1C,CAAC;EAEF,oBAAO,IAAAjC,WAAA,CAAAmC,GAAA,EAAAnC,WAAA,CAAAoC,QAAA;IAAAtB,QAAA,EAAIb,UAAU,CAAEa,QAAS,CAAC,GAAGA,QAAQ,CAAEO,KAAM,CAAC,GAAGA;EAAK,CAAI,CAAC;AACnE;AAAC,IAAAgB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcpC,IAAI","ignoreList":[]}